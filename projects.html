---
layout: default
class: projects-page mobile-dark-header
---

{% for project in site.projects %}
  {% if project.featured %}
    {% assign project = project %}
  {% endif %}
{% endfor %}

{% assign image_url = project.image | prepend: site.baseurl %}
{% include captioned_hero.html
  label='Feature'
  title=project.title
  image=image_url
  caption=project.caption
  deeplink=project.url
%}

{% assign n_projects = 0 %}
{% for project in site.projects %}
  {% unless project.featured or project.funded or project.layout == 'archive' %}
    {% assign n_projects = n_projects | plus: 1 %}
  {% endunless %}
{% endfor %}

{% assign counter = 0 %}
<div class='center-column'>
  <div class='projects-container'>
    <div class='mobile section-title'>LAB PROJECTS</div>
    {% for project in site.projects %}
      {% unless project.featured or project.funded or project.layout == 'archive' %}
        {% assign category = project.categories | first %}
        {% assign mod = counter | modulo:2 %}
        {% if mod == 0 %}
        <div class='two-column-container half-width'>
        {% endif %}
          <div class={% cycle 'left-column', 'right-column' %}>
            <div class='project-image-container desktop-project'>
              <a href='{{ project.url | prepend: site.baseurl }}'>
                {% assign image_url = project.image | prepend: site.baseurl %}
                <div class='background-image blur-container'
                  style='background-image:url("{{ image_url }}")'>
                  {% include cards/card_title_box.html
                    label=category
                    title=project.title
                  %}
                </div>
              </a>
            </div>
            {% include cards/mobile_project_card.html item=project %}
          </div>
          {% assign counter = counter | plus: 1 %}
          {% if counter == n_projects %}
            <div class='right-column'></div>
          {% endif %}
        {% if mod==1 %}
        </div>
        {% endif %}
      {% endunless %}
    {% endfor %}
  </div>

  {% assign items = site.projects | where: 'layout', 'archive' %}
  {% include grids/archive_grid.html
    items=items
    label='FROM THE ARCHIVES'
    render='json'
  %}
</div>